<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leyes de reflexiÃ³n y refracciÃ³n â€” Simulador avanzado</title>
  <meta name="description" content="Simulador avanzado de Ã³ptica para explorar la Ley de Snell, reflexiÃ³n interna total, Ã¡ngulo de Brewster y coeficientes de Fresnel.">
  <link rel="icon" href="../../assets/img/favicon.webp" type="image/webp">
  <link rel="stylesheet" href="./optica-leyes.css">
</head>
<body>
  <div class="container">
    <a href="../../projects.html" class="back-link">â† Volver a proyectos</a>
    <h1>Leyes de reflexiÃ³n y refracciÃ³n â€” Simulador avanzado</h1>
        <p class="lead">
      Ajusta Ã¡ngulos e Ã­ndices, alterna <b>incidencia externa</b> (arribaâ†’abajo) o <b>interna</b> (abajoâ†’arriba),
      muestra un <b>transportador/compÃ¡s</b>, cambia colores del lÃ¡ser y observa <b>RIT</b>, Ã¡ngulo crÃ­tico y coeficientes
      de Fresnel (R/T). Puedes <b>arrastrar</b> el punto de incidencia sobre la interfaz y <b>guardar</b> la imagen.
    </p>


    <div class="simulator-layout">
      <!-- Canvas (ahora a la izquierda) -->
      <div class="canvas-container">
        <canvas id="scene"></canvas>
        <div class="control-card angle-control-mobile mt-1">
          <div class="form-group">
            <label id="lbl-angleDegMobile" for="angleDegMobile">Ãngulo de incidencia Î¸áµ¢ (Â°)</label>
            <input type="range" id="angleDegMobile" min="0" max="89.9" step="0.1" aria-labelledby="lbl-angleDegMobile">
            <input type="number" id="angleDegNumMobile" min="0" max="89.9" step="0.1" aria-labelledby="lbl-angleDegMobile">
          </div>
        </div>
        <p class="helper-text">
          Consejo: prueba con nâ‚ &gt; nâ‚‚ y aumenta Î¸áµ¢ hasta superar Î¸c para observar <em>reflexiÃ³n interna total</em>.
          Arrastra el punto de incidencia a lo largo de la interfaz.
        </p>
        <div class="control-card mt-1">
          <h2>Lecturas</h2>
          <ul class="results-list" id="resultsList">
            <li>Î¸áµ¢ = <b id="resThI">â€”</b>Â°, Î¸Ê³ = <b id="resThR">â€”</b>Â° | Î¸áµ— = <b id="resThT">â€”</b>Â°</li>
            <li>Î¸c = <b id="resThC">â€”</b>Â°</li>
            <li>Î¸á´® (Brewster) = <b id="resThB">â€”</b>Â°</li>
            <li>R (Fresnel) â‰ˆ <b id="resR">â€”</b>% | T â‰ˆ <b id="resT">â€”</b>% <span id="resTIR"></span></li>
          </ul>
          <div class="action-buttons">
            <button id="saveBtn" class="btn">Guardar PNG</button>
            <button id="resetBtn" class="btn">Reset</button>
            <button id="themeToggleBtn" class="btn" aria-label="Cambiar tema">ğŸŒ“</button>
          </div>
        </div>
      </div>

      <!-- Controles (ahora a la derecha) -->
      <div class="controls-sidebar">
      <!-- Columna 1: materiales -->
      <div class="control-card">
        <h2>Medios</h2>
        <div class="form-group">
          <label for="topMat">Medio superior</label>
          <select id="topMat"></select>
          <label id="nTopCustomLabel" for="nTopCustom" class="sub-label hidden">Ãndice (n) personalizado</label>
          <input type="number" id="nTopCustom" min="1" step="0.01" class="hidden mt-05" placeholder="1.50">
        </div>
        <div class="form-group">
          <label for="botMat">Medio inferior</label>
          <select id="botMat"></select>
          <label id="nBotCustomLabel" for="nBotCustom" class="sub-label hidden">Ãndice (n) personalizado</label>
          <input type="number" id="nBotCustom" min="1" step="0.01" class="hidden mt-05" placeholder="1.00">
        </div>
        <div class="form-group">
          <label>Modo de incidencia</label>
          <div class="toggle-group" id="fromTopToggle" role="group" aria-label="Modo de incidencia">
            <button data-value="true" class="active" aria-pressed="true">Externa â†‘â†“</button>
            <button data-value="false" aria-pressed="false">Interna â†“â†‘</button>
          </div>
        </div>
      </div>

      <!-- Columna 2: Ã¡ngulo y estilo -->
      <div class="control-card">
        <h2>Rayo y Ãngulos</h2>
        <div class="form-group angle-control-desktop">
          <label id="lbl-angleDeg" for="angleDeg">Ãngulo de incidencia Î¸áµ¢ (Â°)</label>
          <input type="range" id="angleDeg" min="0" max="89.9" step="0.1" aria-labelledby="lbl-angleDeg">
          <input type="number" id="angleDegNum" min="0" max="89.9" step="0.1" aria-labelledby="lbl-angleDeg">
        </div>
        <div class="form-group">
          <label>Colores</label>
          <div class="color-inputs">
            <label>Incidente <input type="color" id="colorIncident" aria-label="Color del rayo incidente"></label>
            <label>Reflejado <input type="color" id="colorReflected" aria-label="Color del rayo reflejado"></label>
            <label>Transmitido <input type="color" id="colorTransmitted" aria-label="Color del rayo transmitido"></label>
          </div>
        </div>
        <div class="form-group">
          <label for="rayWidth">Grosor del rayo (<span id="rayWidthVal"></span>px)</label>
          <input type="range" id="rayWidth" min="1" max="6" step="0.5">
        </div>
        <div class="form-group flags-row">
          <label><input type="checkbox" id="showProtractor"> Transportador</label>
          <label><input type="checkbox" id="showLabels"> Etiquetas</label>
          <label><input type="checkbox" id="showArcs"> Arcos Î¸</label>
        </div>
      </div>

    </div>
    <!-- Notas teÃ³ricas -->
    <div class="notes-card">
      <h3>Notas rÃ¡pidas</h3>
      <ul>
        <li>Ley de Snell: nâ‚Â·sin(Î¸áµ¢) = nâ‚‚Â·sin(Î¸áµ—). La reflexiÃ³n especular cumple Î¸Ê³ = Î¸áµ¢.</li>
        <li>Ãngulo crÃ­tico (si nâ‚ > nâ‚‚): Î¸c = arcsin(nâ‚‚/nâ‚). Para Î¸áµ¢ â‰¥ Î¸c, ocurre <b>RIT</b>.</li>
        <li>Ãngulo de Brewster: tan(Î¸á´®) = nâ‚‚/nâ‚ â‡’ Râ‚š = 0 (para polarizaciÃ³n p).</li>
        <li>Coeficientes de Fresnel (no polarizado) dan la fracciÃ³n de intensidad reflejada (R) y transmitida (T).</li>
      </ul>
    </div>
  </div>

  <script src="./optica-leyes.js"></script>
</body>
</html>
